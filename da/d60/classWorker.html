<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.7"/>
<title>DNS: Worker Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">DNS
   &#160;<span id="projectnumber">0.0.1</span>
   </div>
   <div id="projectbrief">Basic DNS</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.7 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="../../annotated.html"><span>Classes</span></a></li>
      <li><a href="../../files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="../../classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="../../inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="../../functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Macros</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="../../d5/db9/classWorker-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">Worker Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="../../da/da5/worker_8h_source.html">worker.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ae060a697b07a497159e8da6b22d70150"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d60/classWorker.html#ae060a697b07a497159e8da6b22d70150">Worker</a> (char *db_name, std::mutex *lock, <a class="el" href="../../d6/d87/classReader.html">Reader</a> *rd, <a class="el" href="../../d0/d40/classParser.html">Parser</a> *pr, int id)</td></tr>
<tr class="separator:ae060a697b07a497159e8da6b22d70150"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa8e4543ef1e93fd9d884269ba30c5bfe"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d60/classWorker.html#aa8e4543ef1e93fd9d884269ba30c5bfe">~Worker</a> ()</td></tr>
<tr class="separator:aa8e4543ef1e93fd9d884269ba30c5bfe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac10253b70899ef53b6548ac62a2ba707"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../dd/d3c/classTranzaction.html">Tranzaction</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d60/classWorker.html#ac10253b70899ef53b6548ac62a2ba707">_read</a> ()</td></tr>
<tr class="separator:ac10253b70899ef53b6548ac62a2ba707"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a11ecee3d0a317545daf28b37cb1d447d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d60/classWorker.html#a11ecee3d0a317545daf28b37cb1d447d">_query</a> (<a class="el" href="../../dd/d3c/classTranzaction.html">Tranzaction</a> *tr)</td></tr>
<tr class="separator:a11ecee3d0a317545daf28b37cb1d447d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c28a6aa586d85294ba4dffc53174730"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d60/classWorker.html#a6c28a6aa586d85294ba4dffc53174730">_send</a> (<a class="el" href="../../dd/d3c/classTranzaction.html">Tranzaction</a> *tr)</td></tr>
<tr class="separator:a6c28a6aa586d85294ba4dffc53174730"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a296bc6b6cea5648d891561a01d2c3f98"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d60/classWorker.html#a296bc6b6cea5648d891561a01d2c3f98">work</a> ()</td></tr>
<tr class="separator:a296bc6b6cea5648d891561a01d2c3f98"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb86386fcadc1d65aa802cfd8b9355cf"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d60/classWorker.html#adb86386fcadc1d65aa802cfd8b9355cf">sign_stop</a> ()</td></tr>
<tr class="separator:adb86386fcadc1d65aa802cfd8b9355cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="ae060a697b07a497159e8da6b22d70150"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Worker::Worker </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>db_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::mutex *&#160;</td>
          <td class="paramname"><em>lock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d6/d87/classReader.html">Reader</a> *&#160;</td>
          <td class="paramname"><em>rd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d0/d40/classParser.html">Parser</a> *&#160;</td>
          <td class="paramname"><em>pr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;                                                                           :</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;    parser(pr)</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;{</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;    <span class="comment">/* Pregatim un worker</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="comment">     * @param[in] db_name</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="comment">     *  Numele bazei de date</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="comment">     * @param[in] *lock</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="comment">     *  Lock-ul pentru pool</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="comment">     * @param[in] *rd</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="comment">     *  Un obiect de tip reader</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="comment">     * @param[in] *pr</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="comment">     *  Un parser sa vedem optiunile de la CLI</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="comment">     * @param[in] id</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="comment">     *  Id-ul pentru acest worker</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    this-&gt;<span class="keywordtype">id</span> = id;</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    std::cout &lt;&lt; <span class="stringliteral">&quot;Pornim Worker - &quot;</span>&lt;&lt; this-&gt;<span class="keywordtype">id</span> &lt;&lt; std::endl;</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    this-&gt;parser = pr;</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    this-&gt;db = <span class="keyword">new</span> <a class="code" href="../../df/d70/classDB.html">DB</a>(db_name);</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    this-&gt;lock = lock;</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    this-&gt;rd = rd;</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    this-&gt;stop = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;}</div>
<div class="ttc" id="classDB_html"><div class="ttname"><a href="../../df/d70/classDB.html">DB</a></div><div class="ttdef"><b>Definition:</b> db.h:11</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aa8e4543ef1e93fd9d884269ba30c5bfe"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Worker::~Worker </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;{</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    <span class="comment">/* Deletam tot */</span></div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    <span class="keyword">delete</span> this-&gt;db;</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a11ecee3d0a317545daf28b37cb1d447d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Worker::_query </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/d3c/classTranzaction.html">Tranzaction</a> *&#160;</td>
          <td class="paramname"><em>tr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;{</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    <span class="comment">/* Pregateste raspunsurile</span></div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;<span class="comment">     * @param[in, out] tr</span></div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;<span class="comment">     *  Tranzactia care are intrebarile, la iesire</span></div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;<span class="comment">     *  va fi populata cu raspunsuri</span></div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    std::vector&lt;Question&gt; aux = tr-&gt;<a class="code" href="../../dd/d3c/classTranzaction.html#ab396e13a55a9844fc070f083716fe8f0">get_questions</a>();</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    <span class="keywordflow">for</span> (std::vector&lt;Question&gt;::iterator it = aux.begin();</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;         it != aux.end(); ++it)</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    {</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;        <span class="keywordtype">char</span> *domain;</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> len;</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;        (*it).get_name(&amp;domain, len);</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;        std::string ip = this-&gt;db-&gt;<a class="code" href="../../df/d70/classDB.html#ac8822a0be23a127fd28eb47c289e70f5">get_ip</a>(domain, len);</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;        <span class="keywordflow">if</span> (ip != std::string(<span class="stringliteral">&quot;&quot;</span>))</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;        {</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;            <span class="comment">/* Daca am gasit un ip */</span></div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;            <a class="code" href="../../da/dcd/classResource.html">Resource</a> res;</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;            res.<a class="code" href="../../da/dcd/classResource.html#a258cb5ab77f4c039cdfca8d7dd2cb470">set_name</a>(domain, len);</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;            <span class="keywordtype">char</span> <span class="keyword">generic</span>[2]; <span class="comment">/* generic 00 01 */</span></div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;            <span class="keyword">generic</span>[0] = 0;</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;            <span class="keyword">generic</span>[1] = 1;</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;            res.<a class="code" href="../../da/dcd/classResource.html#a7e216bb12ad18f9ba3615cf3098bd06b">set_type</a>(<span class="keyword">generic</span>);</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;            res.<a class="code" href="../../da/dcd/classResource.html#a5f0a3d4b7652622783affe627f6a9a6f">set_class</a>(<span class="keyword">generic</span>);</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;            <span class="keywordtype">char</span> generic_ttl[4]; <span class="comment">/* generic 00 00 00 30 */</span></div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;            generic_ttl[0] = 0;</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;            generic_ttl[1] = 0;</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;            generic_ttl[2] = 0;</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;            generic_ttl[3] = 30;</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;            res.<a class="code" href="../../da/dcd/classResource.html#a36e2ed7548b8fb5efe3a0236e9dc3178">set_ttl</a>(generic_ttl);</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;            </div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;            in_addr_t ip_addr = inet_addr(ip.c_str());</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;            <span class="comment">/* NOTE(mmicu): 4 e hardcodat, desi asta o sa fie dimensiuena unui IPv4</span></div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;<span class="comment">             * mereu ar trebui sa folosim sizeof */</span></div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;            std::cout &lt;&lt; <span class="stringliteral">&quot;ip_addr&quot;</span> &lt;&lt; ip_addr &lt;&lt; std::endl;</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;            <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> len = 4;</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;            len = htons(len);</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;            res.<a class="code" href="../../da/dcd/classResource.html#ab223da81a9997775752deb977b699472">set_data</a>((<span class="keywordtype">char</span>*)&amp;ip_addr, len);</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;            tr-&gt;<a class="code" href="../../dd/d3c/classTranzaction.html#a1735a80f4f4d48b1a741f80c6f413c30">add_answer</a>(res);</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;        }</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;        <span class="keyword">delete</span> domain;</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    }</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    tr-&gt;<a class="code" href="../../dd/d3c/classTranzaction.html#aaf887bbf0a1a830859ff12fb7d15229a">set_flag_response</a>();</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    <span class="keywordflow">if</span> (tr-&gt;<a class="code" href="../../dd/d3c/classTranzaction.html#a0f6907f39da32dea8d67b3979a1d71ed">get_ancount_short</a>() == 0)</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    {</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;        <span class="comment">/* Nu avem nici un raspuns */</span></div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;        tr-&gt;<a class="code" href="../../dd/d3c/classTranzaction.html#ae67b834003083c7f3fe310e1fbaef78f">set_flag_notfound</a>();</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    }</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;}</div>
<div class="ttc" id="classResource_html_a36e2ed7548b8fb5efe3a0236e9dc3178"><div class="ttname"><a href="../../da/dcd/classResource.html#a36e2ed7548b8fb5efe3a0236e9dc3178">Resource::set_ttl</a></div><div class="ttdeci">void set_ttl(char ttl[4])</div><div class="ttdef"><b>Definition:</b> dns.cpp:260</div></div>
<div class="ttc" id="classResource_html_ab223da81a9997775752deb977b699472"><div class="ttname"><a href="../../da/dcd/classResource.html#ab223da81a9997775752deb977b699472">Resource::set_data</a></div><div class="ttdeci">void set_data(char *data, unsigned short length)</div><div class="ttdef"><b>Definition:</b> dns.cpp:271</div></div>
<div class="ttc" id="classResource_html_a5f0a3d4b7652622783affe627f6a9a6f"><div class="ttname"><a href="../../da/dcd/classResource.html#a5f0a3d4b7652622783affe627f6a9a6f">Resource::set_class</a></div><div class="ttdeci">void set_class(char qclass[2])</div><div class="ttdef"><b>Definition:</b> dns.cpp:248</div></div>
<div class="ttc" id="classResource_html_a7e216bb12ad18f9ba3615cf3098bd06b"><div class="ttname"><a href="../../da/dcd/classResource.html#a7e216bb12ad18f9ba3615cf3098bd06b">Resource::set_type</a></div><div class="ttdeci">void set_type(char type[2])</div><div class="ttdef"><b>Definition:</b> dns.cpp:237</div></div>
<div class="ttc" id="classDB_html_ac8822a0be23a127fd28eb47c289e70f5"><div class="ttname"><a href="../../df/d70/classDB.html#ac8822a0be23a127fd28eb47c289e70f5">DB::get_ip</a></div><div class="ttdeci">std::string get_ip(char *name, unsigned short name_len)</div><div class="ttdef"><b>Definition:</b> db.cpp:214</div></div>
<div class="ttc" id="classTranzaction_html_ab396e13a55a9844fc070f083716fe8f0"><div class="ttname"><a href="../../dd/d3c/classTranzaction.html#ab396e13a55a9844fc070f083716fe8f0">Tranzaction::get_questions</a></div><div class="ttdeci">std::vector&lt; Question &gt; get_questions()</div><div class="ttdef"><b>Definition:</b> dns.cpp:666</div></div>
<div class="ttc" id="classResource_html_a258cb5ab77f4c039cdfca8d7dd2cb470"><div class="ttname"><a href="../../da/dcd/classResource.html#a258cb5ab77f4c039cdfca8d7dd2cb470">Resource::set_name</a></div><div class="ttdeci">void set_name(char *name, unsigned short length)</div><div class="ttdef"><b>Definition:</b> dns.cpp:221</div></div>
<div class="ttc" id="classTranzaction_html_ae67b834003083c7f3fe310e1fbaef78f"><div class="ttname"><a href="../../dd/d3c/classTranzaction.html#ae67b834003083c7f3fe310e1fbaef78f">Tranzaction::set_flag_notfound</a></div><div class="ttdeci">void set_flag_notfound()</div><div class="ttdef"><b>Definition:</b> dns.cpp:712</div></div>
<div class="ttc" id="classTranzaction_html_aaf887bbf0a1a830859ff12fb7d15229a"><div class="ttname"><a href="../../dd/d3c/classTranzaction.html#aaf887bbf0a1a830859ff12fb7d15229a">Tranzaction::set_flag_response</a></div><div class="ttdeci">void set_flag_response()</div><div class="ttdef"><b>Definition:</b> dns.cpp:706</div></div>
<div class="ttc" id="classTranzaction_html_a0f6907f39da32dea8d67b3979a1d71ed"><div class="ttname"><a href="../../dd/d3c/classTranzaction.html#a0f6907f39da32dea8d67b3979a1d71ed">Tranzaction::get_ancount_short</a></div><div class="ttdeci">unsigned short get_ancount_short()</div><div class="ttdef"><b>Definition:</b> dns.cpp:615</div></div>
<div class="ttc" id="classTranzaction_html_a1735a80f4f4d48b1a741f80c6f413c30"><div class="ttname"><a href="../../dd/d3c/classTranzaction.html#a1735a80f4f4d48b1a741f80c6f413c30">Tranzaction::add_answer</a></div><div class="ttdeci">void add_answer(Resource ans)</div><div class="ttdef"><b>Definition:</b> dns.cpp:518</div></div>
<div class="ttc" id="classResource_html"><div class="ttname"><a href="../../da/dcd/classResource.html">Resource</a></div><div class="ttdef"><b>Definition:</b> dns.h:43</div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../da/d60/classWorker_a11ecee3d0a317545daf28b37cb1d447d_cgraph.png" border="0" usemap="#da/d60/classWorker_a11ecee3d0a317545daf28b37cb1d447d_cgraph" alt=""/></div>
<map name="da/d60/classWorker_a11ecee3d0a317545daf28b37cb1d447d_cgraph" id="da/d60/classWorker_a11ecee3d0a317545daf28b37cb1d447d_cgraph">
<area shape="rect" id="node2" href="../../dd/d3c/classTranzaction.html#ab396e13a55a9844fc070f083716fe8f0" title="Tranzaction::get_questions" alt="" coords="165,5,344,32"/><area shape="rect" id="node3" href="../../df/d70/classDB.html#ac8822a0be23a127fd28eb47c289e70f5" title="DB::get_ip" alt="" coords="213,56,297,83"/><area shape="rect" id="node5" href="../../da/dcd/classResource.html#a258cb5ab77f4c039cdfca8d7dd2cb470" title="Resource::set_name" alt="" coords="183,107,326,133"/><area shape="rect" id="node6" href="../../da/dcd/classResource.html#a7e216bb12ad18f9ba3615cf3098bd06b" title="Resource::set_type" alt="" coords="187,157,323,184"/><area shape="rect" id="node7" href="../../da/dcd/classResource.html#a5f0a3d4b7652622783affe627f6a9a6f" title="Resource::set_class" alt="" coords="183,208,326,235"/><area shape="rect" id="node8" href="../../da/dcd/classResource.html#a36e2ed7548b8fb5efe3a0236e9dc3178" title="Resource::set_ttl" alt="" coords="193,259,316,285"/><area shape="rect" id="node9" href="../../da/dcd/classResource.html#ab223da81a9997775752deb977b699472" title="Resource::set_data" alt="" coords="187,309,323,336"/><area shape="rect" id="node10" href="../../dd/d3c/classTranzaction.html#a1735a80f4f4d48b1a741f80c6f413c30" title="Tranzaction::add_answer" alt="" coords="171,360,339,387"/><area shape="rect" id="node11" href="../../dd/d3c/classTranzaction.html#aaf887bbf0a1a830859ff12fb7d15229a" title="Tranzaction::set_flag\l_response" alt="" coords="183,411,327,453"/><area shape="rect" id="node12" href="../../dd/d3c/classTranzaction.html#a0f6907f39da32dea8d67b3979a1d71ed" title="Tranzaction::get_ancount\l_short" alt="" coords="170,477,339,518"/><area shape="rect" id="node13" href="../../dd/d3c/classTranzaction.html#ae67b834003083c7f3fe310e1fbaef78f" title="Tranzaction::set_flag\l_notfound" alt="" coords="183,542,327,583"/><area shape="rect" id="node4" href="../../df/d4e/db_8cpp.html#a2222329f39dc3faa86f80322b284d5b0" title="callback" alt="" coords="393,56,463,83"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../da/d60/classWorker_a11ecee3d0a317545daf28b37cb1d447d_icgraph.png" border="0" usemap="#da/d60/classWorker_a11ecee3d0a317545daf28b37cb1d447d_icgraph" alt=""/></div>
<map name="da/d60/classWorker_a11ecee3d0a317545daf28b37cb1d447d_icgraph" id="da/d60/classWorker_a11ecee3d0a317545daf28b37cb1d447d_icgraph">
<area shape="rect" id="node2" href="../../da/d60/classWorker.html#a296bc6b6cea5648d891561a01d2c3f98" title="Worker::work" alt="" coords="166,5,266,32"/><area shape="rect" id="node3" href="../../d4/de8/worker_8cpp.html#aa03183d8c853d59ae406e1184f4dca44" title="run" alt="" coords="315,5,355,32"/><area shape="rect" id="node4" href="../../d7/d4d/classWorkerPool.html#a5fb7c5abd49a4acc556cfeb262dc28b8" title="WorkerPool::start" alt="" coords="403,5,527,32"/><area shape="rect" id="node5" href="../../df/d0a/main_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="576,5,627,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ac10253b70899ef53b6548ac62a2ba707"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dd/d3c/classTranzaction.html">Tranzaction</a> * Worker::_read </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;{</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <span class="comment">/* Citim o noua tranzactie */</span></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    <a class="code" href="../../dd/d3c/classTranzaction.html">Tranzaction</a> *tr = NULL;</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    <span class="keywordflow">try</span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    {</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;         tr = this-&gt;rd-&gt;<a class="code" href="../../d6/d87/classReader.html#ae18cce6f5a226f639691a3377339626b">read</a>();</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    }</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    <span class="keywordflow">catch</span> (<a class="code" href="../../d0/d6c/classBaseException.html">BaseException</a>* ex)</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    {</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;        std::cout &lt;&lt; <span class="stringliteral">&quot;[&quot;</span> &lt;&lt; this-&gt;<span class="keywordtype">id</span> &lt;&lt; <span class="stringliteral">&quot;] Eroare la citire !&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    }</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    <span class="keywordflow">return</span> tr;</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;}</div>
<div class="ttc" id="classTranzaction_html"><div class="ttname"><a href="../../dd/d3c/classTranzaction.html">Tranzaction</a></div><div class="ttdef"><b>Definition:</b> dns.h:81</div></div>
<div class="ttc" id="classBaseException_html"><div class="ttname"><a href="../../d0/d6c/classBaseException.html">BaseException</a></div><div class="ttdef"><b>Definition:</b> exceptions.h:13</div></div>
<div class="ttc" id="classReader_html_ae18cce6f5a226f639691a3377339626b"><div class="ttname"><a href="../../d6/d87/classReader.html#ae18cce6f5a226f639691a3377339626b">Reader::read</a></div><div class="ttdeci">Tranzaction * read()</div><div class="ttdef"><b>Definition:</b> reader.cpp:174</div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../da/d60/classWorker_ac10253b70899ef53b6548ac62a2ba707_cgraph.png" border="0" usemap="#da/d60/classWorker_ac10253b70899ef53b6548ac62a2ba707_cgraph" alt=""/></div>
<map name="da/d60/classWorker_ac10253b70899ef53b6548ac62a2ba707_cgraph" id="da/d60/classWorker_ac10253b70899ef53b6548ac62a2ba707_cgraph">
<area shape="rect" id="node2" href="../../d6/d87/classReader.html#ae18cce6f5a226f639691a3377339626b" title="Reader::read" alt="" coords="158,317,255,344"/><area shape="rect" id="node3" href="../../db/d00/classServer.html#a700170b634d06a6905a02094545cc1be" title="Server::read" alt="" coords="347,5,440,32"/><area shape="rect" id="node4" href="../../dd/d3c/classTranzaction.html#a98a064628761c0e0453f58a4cb76b5d4" title="Tranzaction::set_id" alt="" coords="327,56,460,83"/><area shape="rect" id="node5" href="../../dd/d3c/classTranzaction.html#a380014fa214c49ef7d35f0b362353665" title="Tranzaction::set_flags" alt="" coords="318,107,469,133"/><area shape="rect" id="node6" href="../../dd/d3c/classTranzaction.html#a1ac39cd5931e55eb2d7bf02d2fc929c3" title="Tranzaction::add_question" alt="" coords="306,157,481,184"/><area shape="rect" id="node7" href="../../dd/d3c/classTranzaction.html#a1735a80f4f4d48b1a741f80c6f413c30" title="Tranzaction::add_answer" alt="" coords="309,208,477,235"/><area shape="rect" id="node8" href="../../dd/d3c/classTranzaction.html#a4f169d0fded1e640fa087f24d193931d" title="Tranzaction::add_authority" alt="" coords="305,259,481,285"/><area shape="rect" id="node9" href="../../dd/d3c/classTranzaction.html#acf7a854149b9f7c161fdae719d2faf08" title="Tranzaction::add_additiona\l_section" alt="" coords="304,310,483,351"/><area shape="rect" id="node10" href="../../dd/d3c/classTranzaction.html#a692ed80847ef5e66c0e23191cd9068ac" title="Tranzaction::get_qcount\l_short" alt="" coords="535,346,697,387"/><area shape="rect" id="node11" href="../../dd/d3c/classTranzaction.html#a0f6907f39da32dea8d67b3979a1d71ed" title="Tranzaction::get_ancount\l_short" alt="" coords="531,411,701,453"/><area shape="rect" id="node12" href="../../dd/d3c/classTranzaction.html#a77dfd33f587855b9e6df18986d2cd3bd" title="Tranzaction::get_nscount\l_short" alt="" coords="531,529,701,570"/><area shape="rect" id="node13" href="../../dd/d3c/classTranzaction.html#a31568b2213690e330738c6d1f0af326d" title="Tranzaction::get_arcount\l_short" alt="" coords="533,594,699,635"/><area shape="rect" id="node14" href="../../dd/d3c/classTranzaction.html#a43bf4c7138aa2d0c12c147f5f864339a" title="Tranzaction::set_client" alt="" coords="316,629,471,656"/><area shape="rect" id="node15" href="../../dd/d3c/classTranzaction.html#a3e89bf256574fb2afa8e598eff0418a5" title="Tranzaction::print_info" alt="" coords="318,477,469,504"/><area shape="rect" id="node16" href="../../d7/d52/dns_8cpp.html#a71e56c73c6668592f5b1fd31de2b41e0" title="print_hex" alt="" coords="579,477,653,504"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../da/d60/classWorker_ac10253b70899ef53b6548ac62a2ba707_icgraph.png" border="0" usemap="#da/d60/classWorker_ac10253b70899ef53b6548ac62a2ba707_icgraph" alt=""/></div>
<map name="da/d60/classWorker_ac10253b70899ef53b6548ac62a2ba707_icgraph" id="da/d60/classWorker_ac10253b70899ef53b6548ac62a2ba707_icgraph">
<area shape="rect" id="node2" href="../../da/d60/classWorker.html#a296bc6b6cea5648d891561a01d2c3f98" title="Worker::work" alt="" coords="158,5,258,32"/><area shape="rect" id="node3" href="../../d4/de8/worker_8cpp.html#aa03183d8c853d59ae406e1184f4dca44" title="run" alt="" coords="307,5,347,32"/><area shape="rect" id="node4" href="../../d7/d4d/classWorkerPool.html#a5fb7c5abd49a4acc556cfeb262dc28b8" title="WorkerPool::start" alt="" coords="395,5,519,32"/><area shape="rect" id="node5" href="../../df/d0a/main_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="568,5,619,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a6c28a6aa586d85294ba4dffc53174730"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Worker::_send </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/d3c/classTranzaction.html">Tranzaction</a> *&#160;</td>
          <td class="paramname"><em>tr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;{</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    <span class="comment">/* Serializeaza tranzactia si trimite raspunsul */</span></div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    tr-&gt;<a class="code" href="../../dd/d3c/classTranzaction.html#a3e89bf256574fb2afa8e598eff0418a5">print_info</a>();</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    <span class="keywordtype">char</span>* data;</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> data_len;</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    tr-&gt;<a class="code" href="../../dd/d3c/classTranzaction.html#a193dc79127b945ae6fc6daf3117142cc">serialize</a>(&amp;data, data_len);</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    std::cout &lt;&lt; <span class="stringliteral">&quot;Serializare :&quot;</span>;</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    tr-&gt;<a class="code" href="../../dd/d3c/classTranzaction.html#abe33bafa6684a41499207d8a0650141d">serialize_hex</a>();</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    <span class="keyword">struct </span>sockaddr client = tr-&gt;<a class="code" href="../../dd/d3c/classTranzaction.html#aa9bc34b67c65ec05c4ba074f19372223">get_client</a>();</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    <span class="keywordflow">try</span></div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    {</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;        this-&gt;rd-&gt;<a class="code" href="../../d6/d87/classReader.html#a186ff5b3f89fd5d75521ba9d05b1d92b">get_server</a>()-&gt;<a class="code" href="../../db/d00/classServer.html#ad3b206d145b8223856bd2ce2fa51c768">send</a>(data, data_len, 0, (<span class="keyword">struct</span> sockaddr*)&amp;client, <span class="keyword">sizeof</span>(client));</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    }</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    <span class="keywordflow">catch</span> (<a class="code" href="../../d0/d6c/classBaseException.html">BaseException</a>* ex)</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    {</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;        std::cout &lt;&lt; <span class="stringliteral">&quot;[&quot;</span> &lt;&lt; this-&gt;<span class="keywordtype">id</span> &lt;&lt; <span class="stringliteral">&quot;] Trimitere - eroare&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    }</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;}</div>
<div class="ttc" id="classTranzaction_html_a3e89bf256574fb2afa8e598eff0418a5"><div class="ttname"><a href="../../dd/d3c/classTranzaction.html#a3e89bf256574fb2afa8e598eff0418a5">Tranzaction::print_info</a></div><div class="ttdeci">void print_info()</div><div class="ttdef"><b>Definition:</b> dns.cpp:719</div></div>
<div class="ttc" id="classServer_html_ad3b206d145b8223856bd2ce2fa51c768"><div class="ttname"><a href="../../db/d00/classServer.html#ad3b206d145b8223856bd2ce2fa51c768">Server::send</a></div><div class="ttdeci">ssize_t send(const void *buf, size_t len, int flags, const struct sockaddr *dest_addr, socklen_t addrlen)</div><div class="ttdef"><b>Definition:</b> server.cpp:120</div></div>
<div class="ttc" id="classTranzaction_html_a193dc79127b945ae6fc6daf3117142cc"><div class="ttname"><a href="../../dd/d3c/classTranzaction.html#a193dc79127b945ae6fc6daf3117142cc">Tranzaction::serialize</a></div><div class="ttdeci">void serialize(char **data, unsigned short &amp;len)</div><div class="ttdef"><b>Definition:</b> dns.cpp:765</div></div>
<div class="ttc" id="classBaseException_html"><div class="ttname"><a href="../../d0/d6c/classBaseException.html">BaseException</a></div><div class="ttdef"><b>Definition:</b> exceptions.h:13</div></div>
<div class="ttc" id="classReader_html_a186ff5b3f89fd5d75521ba9d05b1d92b"><div class="ttname"><a href="../../d6/d87/classReader.html#a186ff5b3f89fd5d75521ba9d05b1d92b">Reader::get_server</a></div><div class="ttdeci">Server * get_server()</div><div class="ttdef"><b>Definition:</b> reader.cpp:319</div></div>
<div class="ttc" id="classTranzaction_html_aa9bc34b67c65ec05c4ba074f19372223"><div class="ttname"><a href="../../dd/d3c/classTranzaction.html#aa9bc34b67c65ec05c4ba074f19372223">Tranzaction::get_client</a></div><div class="ttdeci">sockaddr get_client()</div><div class="ttdef"><b>Definition:</b> dns.cpp:700</div></div>
<div class="ttc" id="classTranzaction_html_abe33bafa6684a41499207d8a0650141d"><div class="ttname"><a href="../../dd/d3c/classTranzaction.html#abe33bafa6684a41499207d8a0650141d">Tranzaction::serialize_hex</a></div><div class="ttdeci">void serialize_hex()</div><div class="ttdef"><b>Definition:</b> dns.cpp:840</div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../da/d60/classWorker_a6c28a6aa586d85294ba4dffc53174730_cgraph.png" border="0" usemap="#da/d60/classWorker_a6c28a6aa586d85294ba4dffc53174730_cgraph" alt=""/></div>
<map name="da/d60/classWorker_a6c28a6aa586d85294ba4dffc53174730_cgraph" id="da/d60/classWorker_a6c28a6aa586d85294ba4dffc53174730_cgraph">
<area shape="rect" id="node2" href="../../dd/d3c/classTranzaction.html#a3e89bf256574fb2afa8e598eff0418a5" title="Tranzaction::print_info" alt="" coords="385,120,535,147"/><area shape="rect" id="node8" href="../../dd/d3c/classTranzaction.html#a193dc79127b945ae6fc6daf3117142cc" title="Tranzaction::serialize" alt="" coords="387,195,533,221"/><area shape="rect" id="node10" href="../../dd/d3c/classTranzaction.html#abe33bafa6684a41499207d8a0650141d" title="Tranzaction::serialize_hex" alt="" coords="161,161,335,188"/><area shape="rect" id="node11" href="../../dd/d3c/classTranzaction.html#aa9bc34b67c65ec05c4ba074f19372223" title="Tranzaction::get_client" alt="" coords="171,263,325,289"/><area shape="rect" id="node12" href="../../d6/d87/classReader.html#a186ff5b3f89fd5d75521ba9d05b1d92b" title="Reader::get_server" alt="" coords="181,313,315,340"/><area shape="rect" id="node13" href="../../db/d00/classServer.html#ad3b206d145b8223856bd2ce2fa51c768" title="Server::send" alt="" coords="200,364,296,391"/><area shape="rect" id="node3" href="../../d7/d52/dns_8cpp.html#a71e56c73c6668592f5b1fd31de2b41e0" title="print_hex" alt="" coords="632,5,707,32"/><area shape="rect" id="node4" href="../../dd/d3c/classTranzaction.html#a692ed80847ef5e66c0e23191cd9068ac" title="Tranzaction::get_qcount\l_short" alt="" coords="588,253,751,294"/><area shape="rect" id="node5" href="../../dd/d3c/classTranzaction.html#a0f6907f39da32dea8d67b3979a1d71ed" title="Tranzaction::get_ancount\l_short" alt="" coords="585,57,754,98"/><area shape="rect" id="node6" href="../../dd/d3c/classTranzaction.html#a77dfd33f587855b9e6df18986d2cd3bd" title="Tranzaction::get_nscount\l_short" alt="" coords="585,122,754,163"/><area shape="rect" id="node7" href="../../dd/d3c/classTranzaction.html#a31568b2213690e330738c6d1f0af326d" title="Tranzaction::get_arcount\l_short" alt="" coords="586,187,753,229"/><area shape="rect" id="node9" href="../../d7/d52/dns_8cpp.html#a83c982b1f13ec3b29d8016341b4ce404" title="concat" alt="" coords="639,319,700,345"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../da/d60/classWorker_a6c28a6aa586d85294ba4dffc53174730_icgraph.png" border="0" usemap="#da/d60/classWorker_a6c28a6aa586d85294ba4dffc53174730_icgraph" alt=""/></div>
<map name="da/d60/classWorker_a6c28a6aa586d85294ba4dffc53174730_icgraph" id="da/d60/classWorker_a6c28a6aa586d85294ba4dffc53174730_icgraph">
<area shape="rect" id="node2" href="../../da/d60/classWorker.html#a296bc6b6cea5648d891561a01d2c3f98" title="Worker::work" alt="" coords="161,5,261,32"/><area shape="rect" id="node3" href="../../d4/de8/worker_8cpp.html#aa03183d8c853d59ae406e1184f4dca44" title="run" alt="" coords="309,5,349,32"/><area shape="rect" id="node4" href="../../d7/d4d/classWorkerPool.html#a5fb7c5abd49a4acc556cfeb262dc28b8" title="WorkerPool::start" alt="" coords="398,5,522,32"/><area shape="rect" id="node5" href="../../df/d0a/main_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="571,5,621,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="adb86386fcadc1d65aa802cfd8b9355cf"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Worker::sign_stop </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;{</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    <span class="comment">/* Trimite semnalul de oprire */</span></div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    std::cout &lt;&lt; <span class="stringliteral">&quot;Trimitem semnanul de oprire&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    this-&gt;stop = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a296bc6b6cea5648d891561a01d2c3f98"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Worker::work </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;{</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    <span class="comment">/* Realizam un ciclu */</span></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    std::cout &lt;&lt; <span class="stringliteral">&quot;[&quot;</span> &lt;&lt; this-&gt;<span class="keywordtype">id</span> &lt;&lt; <span class="stringliteral">&quot;] Work apel !&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    <span class="keywordflow">while</span> (this-&gt;stop == <span class="keyword">false</span>)</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    {</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;        std::cout &lt;&lt; <span class="stringliteral">&quot;[&quot;</span> &lt;&lt; this-&gt;<span class="keywordtype">id</span> &lt;&lt; <span class="stringliteral">&quot;] Lock Work !&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;        this-&gt;lock-&gt;lock();</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;        <span class="comment">/* Citim o tranzactie */</span></div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;        <a class="code" href="../../dd/d3c/classTranzaction.html">Tranzaction</a>* tr = this-&gt;<a class="code" href="../../da/d60/classWorker.html#ac10253b70899ef53b6548ac62a2ba707">_read</a>();</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;        <span class="comment">/* Raspundem la tranzactie */</span></div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;        this-&gt;<a class="code" href="../../da/d60/classWorker.html#a11ecee3d0a317545daf28b37cb1d447d">_query</a>(tr);</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;        <span class="comment">/* Trimitem informatiile serializate */</span></div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;        this-&gt;<a class="code" href="../../da/d60/classWorker.html#a6c28a6aa586d85294ba4dffc53174730">_send</a>(tr);</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;        <span class="comment">/* Eliberam memoria */</span></div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;        <span class="keyword">delete</span> tr;</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;        std::cout &lt;&lt; <span class="stringliteral">&quot;[&quot;</span> &lt;&lt; this-&gt;<span class="keywordtype">id</span> &lt;&lt; <span class="stringliteral">&quot;] Unlock Work !&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;        this-&gt;lock-&gt;unlock();</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    }</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;}</div>
<div class="ttc" id="classTranzaction_html"><div class="ttname"><a href="../../dd/d3c/classTranzaction.html">Tranzaction</a></div><div class="ttdef"><b>Definition:</b> dns.h:81</div></div>
<div class="ttc" id="classWorker_html_a6c28a6aa586d85294ba4dffc53174730"><div class="ttname"><a href="../../da/d60/classWorker.html#a6c28a6aa586d85294ba4dffc53174730">Worker::_send</a></div><div class="ttdeci">void _send(Tranzaction *tr)</div><div class="ttdef"><b>Definition:</b> worker.cpp:181</div></div>
<div class="ttc" id="classWorker_html_a11ecee3d0a317545daf28b37cb1d447d"><div class="ttname"><a href="../../da/d60/classWorker.html#a11ecee3d0a317545daf28b37cb1d447d">Worker::_query</a></div><div class="ttdeci">void _query(Tranzaction *tr)</div><div class="ttdef"><b>Definition:</b> worker.cpp:118</div></div>
<div class="ttc" id="classWorker_html_ac10253b70899ef53b6548ac62a2ba707"><div class="ttname"><a href="../../da/d60/classWorker.html#ac10253b70899ef53b6548ac62a2ba707">Worker::_read</a></div><div class="ttdeci">Tranzaction * _read()</div><div class="ttdef"><b>Definition:</b> worker.cpp:101</div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../da/d60/classWorker_a296bc6b6cea5648d891561a01d2c3f98_cgraph.png" border="0" usemap="#da/d60/classWorker_a296bc6b6cea5648d891561a01d2c3f98_cgraph" alt=""/></div>
<map name="da/d60/classWorker_a296bc6b6cea5648d891561a01d2c3f98_cgraph" id="da/d60/classWorker_a296bc6b6cea5648d891561a01d2c3f98_cgraph">
<area shape="rect" id="node2" href="../../da/d60/classWorker.html#ac10253b70899ef53b6548ac62a2ba707" title="Worker::_read" alt="" coords="156,415,260,441"/><area shape="rect" id="node18" href="../../da/d60/classWorker.html#a11ecee3d0a317545daf28b37cb1d447d" title="Worker::_query" alt="" coords="342,959,453,985"/><area shape="rect" id="node29" href="../../da/d60/classWorker.html#a6c28a6aa586d85294ba4dffc53174730" title="Worker::_send" alt="" coords="155,592,261,619"/><area shape="rect" id="node3" href="../../d6/d87/classReader.html#ae18cce6f5a226f639691a3377339626b" title="Reader::read" alt="" coords="349,351,446,377"/><area shape="rect" id="node4" href="../../db/d00/classServer.html#a700170b634d06a6905a02094545cc1be" title="Server::read" alt="" coords="576,325,669,352"/><area shape="rect" id="node5" href="../../dd/d3c/classTranzaction.html#a98a064628761c0e0453f58a4cb76b5d4" title="Tranzaction::set_id" alt="" coords="556,376,689,403"/><area shape="rect" id="node6" href="../../dd/d3c/classTranzaction.html#a380014fa214c49ef7d35f0b362353665" title="Tranzaction::set_flags" alt="" coords="547,427,698,453"/><area shape="rect" id="node7" href="../../dd/d3c/classTranzaction.html#a1ac39cd5931e55eb2d7bf02d2fc929c3" title="Tranzaction::add_question" alt="" coords="535,477,710,504"/><area shape="rect" id="node8" href="../../dd/d3c/classTranzaction.html#a1735a80f4f4d48b1a741f80c6f413c30" title="Tranzaction::add_answer" alt="" coords="539,680,707,707"/><area shape="rect" id="node9" href="../../dd/d3c/classTranzaction.html#a4f169d0fded1e640fa087f24d193931d" title="Tranzaction::add_authority" alt="" coords="535,5,711,32"/><area shape="rect" id="node10" href="../../dd/d3c/classTranzaction.html#acf7a854149b9f7c161fdae719d2faf08" title="Tranzaction::add_additiona\l_section" alt="" coords="533,158,712,199"/><area shape="rect" id="node11" href="../../dd/d3c/classTranzaction.html#a692ed80847ef5e66c0e23191cd9068ac" title="Tranzaction::get_qcount\l_short" alt="" coords="764,499,927,541"/><area shape="rect" id="node12" href="../../dd/d3c/classTranzaction.html#a0f6907f39da32dea8d67b3979a1d71ed" title="Tranzaction::get_ancount\l_short" alt="" coords="761,630,930,671"/><area shape="rect" id="node13" href="../../dd/d3c/classTranzaction.html#a77dfd33f587855b9e6df18986d2cd3bd" title="Tranzaction::get_nscount\l_short" alt="" coords="761,434,930,475"/><area shape="rect" id="node14" href="../../dd/d3c/classTranzaction.html#a31568b2213690e330738c6d1f0af326d" title="Tranzaction::get_arcount\l_short" alt="" coords="762,565,929,606"/><area shape="rect" id="node15" href="../../dd/d3c/classTranzaction.html#a43bf4c7138aa2d0c12c147f5f864339a" title="Tranzaction::set_client" alt="" coords="545,275,700,301"/><area shape="rect" id="node16" href="../../dd/d3c/classTranzaction.html#a3e89bf256574fb2afa8e598eff0418a5" title="Tranzaction::print_info" alt="" coords="547,579,698,605"/><area shape="rect" id="node17" href="../../d7/d52/dns_8cpp.html#a71e56c73c6668592f5b1fd31de2b41e0" title="print_hex" alt="" coords="808,713,883,740"/><area shape="rect" id="node19" href="../../dd/d3c/classTranzaction.html#ab396e13a55a9844fc070f083716fe8f0" title="Tranzaction::get_questions" alt="" coords="533,1167,712,1193"/><area shape="rect" id="node20" href="../../df/d70/classDB.html#ac8822a0be23a127fd28eb47c289e70f5" title="DB::get_ip" alt="" coords="581,984,665,1011"/><area shape="rect" id="node22" href="../../da/dcd/classResource.html#a258cb5ab77f4c039cdfca8d7dd2cb470" title="Resource::set_name" alt="" coords="551,1217,694,1244"/><area shape="rect" id="node23" href="../../da/dcd/classResource.html#a7e216bb12ad18f9ba3615cf3098bd06b" title="Resource::set_type" alt="" coords="555,1268,691,1295"/><area shape="rect" id="node24" href="../../da/dcd/classResource.html#a5f0a3d4b7652622783affe627f6a9a6f" title="Resource::set_class" alt="" coords="551,832,694,859"/><area shape="rect" id="node25" href="../../da/dcd/classResource.html#a36e2ed7548b8fb5efe3a0236e9dc3178" title="Resource::set_ttl" alt="" coords="561,883,684,909"/><area shape="rect" id="node26" href="../../da/dcd/classResource.html#ab223da81a9997775752deb977b699472" title="Resource::set_data" alt="" coords="555,933,691,960"/><area shape="rect" id="node27" href="../../dd/d3c/classTranzaction.html#aaf887bbf0a1a830859ff12fb7d15229a" title="Tranzaction::set_flag\l_response" alt="" coords="551,1035,695,1077"/><area shape="rect" id="node28" href="../../dd/d3c/classTranzaction.html#ae67b834003083c7f3fe310e1fbaef78f" title="Tranzaction::set_flag\l_notfound" alt="" coords="551,1101,695,1142"/><area shape="rect" id="node21" href="../../df/d4e/db_8cpp.html#a2222329f39dc3faa86f80322b284d5b0" title="callback" alt="" coords="810,984,881,1011"/><area shape="rect" id="node30" href="../../dd/d3c/classTranzaction.html#a193dc79127b945ae6fc6daf3117142cc" title="Tranzaction::serialize" alt="" coords="549,528,696,555"/><area shape="rect" id="node32" href="../../dd/d3c/classTranzaction.html#abe33bafa6684a41499207d8a0650141d" title="Tranzaction::serialize_hex" alt="" coords="310,617,485,644"/><area shape="rect" id="node33" href="../../dd/d3c/classTranzaction.html#aa9bc34b67c65ec05c4ba074f19372223" title="Tranzaction::get_client" alt="" coords="320,567,475,593"/><area shape="rect" id="node34" href="../../d6/d87/classReader.html#a186ff5b3f89fd5d75521ba9d05b1d92b" title="Reader::get_server" alt="" coords="331,668,464,695"/><area shape="rect" id="node35" href="../../db/d00/classServer.html#ad3b206d145b8223856bd2ce2fa51c768" title="Server::send" alt="" coords="349,516,445,543"/><area shape="rect" id="node31" href="../../d7/d52/dns_8cpp.html#a83c982b1f13ec3b29d8016341b4ce404" title="concat" alt="" coords="815,383,876,409"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../da/d60/classWorker_a296bc6b6cea5648d891561a01d2c3f98_icgraph.png" border="0" usemap="#da/d60/classWorker_a296bc6b6cea5648d891561a01d2c3f98_icgraph" alt=""/></div>
<map name="da/d60/classWorker_a296bc6b6cea5648d891561a01d2c3f98_icgraph" id="da/d60/classWorker_a296bc6b6cea5648d891561a01d2c3f98_icgraph">
<area shape="rect" id="node2" href="../../d4/de8/worker_8cpp.html#aa03183d8c853d59ae406e1184f4dca44" title="run" alt="" coords="155,5,195,32"/><area shape="rect" id="node3" href="../../d7/d4d/classWorkerPool.html#a5fb7c5abd49a4acc556cfeb262dc28b8" title="WorkerPool::start" alt="" coords="243,5,367,32"/><area shape="rect" id="node4" href="../../df/d0a/main_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="416,5,467,32"/></map>
</div>
</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>dns/<a class="el" href="../../da/da5/worker_8h_source.html">worker.h</a></li>
<li>dns/<a class="el" href="../../d4/de8/worker_8cpp.html">worker.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Jan 17 2017 23:15:54 for DNS by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.7
</small></address>
</body>
</html>
